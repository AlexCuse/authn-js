"use strict";function url(t){if(!KeratinAuthN.ISSUER.length)throw"KeratinAuthN.ISSUER not set";return""+KeratinAuthN.ISSUER+t}function formData(t){return formDataItem("username",t.username)+"&"+formDataItem("password",t.password)}function formDataItem(t,e){return t+"="+encodeURIComponent(e)}var verbs_1=require("./verbs"),KeratinAuthN={ISSUER:"",signup:function(t){return new Promise(function(e,n){return inflight?void n("duplicate"):(inflight=!0,void verbs_1.post(url("/accounts"),formData(t)).then(function(t){return e(t.id_token)},function(t){return n(t)}).then(function(){return inflight=!1}))})},isAvailable:function(t){return verbs_1.get(url("/accounts/available"),formDataItem("username",t))},refresh:function(){return verbs_1.get(url("/sessions/refresh"),"").then(function(t){return t.id_token})},login:function(t){return verbs_1.post(url("/sessions"),formData(t)).then(function(t){return t.id_token})}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=KeratinAuthN;var inflight=!1;